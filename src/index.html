<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>claas.dev experimental</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {};
    </script>
    <style type="text/tailwindcss">


        line {
            fill: #fff;
            stroke: #000;
            stroke-miterlimit: 10;
            stroke-width: 20px
        }

        .pinkline {
            fill: #fff;
            stroke: hotpink;
            stroke-miterlimit: 10;
            stroke-width: 20px;
        }

        .pinkline {
            /*Hide for now*/
            stroke: transparent;
        }

        .jump-line {
            stroke-dasharray: 1;
            stroke-dashoffset: 0;
            animation: jump linear 20s infinite;
            stroke: white;
        }
        svg {
            background: black;
        }
        
        /* Idea: make lines move at different speeds
          Idea: overlay one line in background color and retract it at same pace so it looks like is moving in at the beginning; 
          Idea: when hovering over menu line let the line stop slowly and move in the line at the same speed that contains the menu option
          Idea: make lines like strings in an instrument and bounce like them and play sound in browser 
          Idea: Add art quote: "Art - Art is a diverse range of human activity, and resulting product, that involves creative or imaginative talent expressive of technical proficiency, beauty, emotional power, or conceptual ideas. (Wikipedia link with icon)"*/

        
        @keyframes jump {

            0% {
                stroke-dashoffset: 200;
            }
            100% {
                stroke-dashoffset: 0;
            }
        }

    </style>
</head>

<body>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1920 1080">
        <defs>

        </defs>
        <g>
            <!--        <line x1="0" y1="221.13" x2="382.75" y2="399.61" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="549.26" y1="477.25" x2="651.62" y2="524.98" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="713.02" y1="553.62" x2="854.65" y2="619.66" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="948.05" y1="663.21" x2="1841.85" y2="1080" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="413.03" y1="413.72" x2="529.84" y2="468.19" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="0" y1="221.13" x2="1841.85" y2="100%" class="pinkline" />
            <line x2="1841.85" y2="100%" x1="0" y1="221.13" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="486" y1="382.41" x2="762.11" y2="2.38" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="0" y1="1051.34" x2="342.31" y2="580.19" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="358.53" y1="557.86" x2="467.27" y2="408.19" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="0" y1="1051.34" x2="762.11" y2="0" class="pinkline" />
            <line x2="0" y2="1051.34" x1="762.11" y1="0" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="160.55" y1="0" x2="356.37" y2="484.67" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="598.66" y1="1084.34" x2="436.75" y2="683.62" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="431.8" y1="671.35" x2="363.68" y2="502.77" style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="160.55" y1="0" x2="598.66" y2="100%" class="pinkline" />
            <line x2="598.66" y2="100%" x1="160.55" y1="0" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="390.04" y1="665.1" x2="520.94" y2="627.57"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="0" y1="776.94" x2="368.3" y2="671.33"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="549.96" y1="619.24" x2="664.96" y2="586.27"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="710.9" y1="573.09" x2="904.36" y2="517.62"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="994.95" y1="491.64" x2="1177.92" y2="439.18"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1242.35" y1="420.7" x2="1920" y2="226.38"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="0" y1="776.94" x2="100%" y2="226.38" class="pinkline" />
            <line x2="0" y2="776.94" x1="100%" y1="226.38" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="983.09" y1="364.82" x2="1101.63" y2="0"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="750.72" y1="1080" x2="867.78" y2="719.73"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="875.96" y1="694.55" x2="974.66" y2="390.78"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="750.72" y1="100%" x2="1101.63" y2="0" class="pinkline" />
            <line x2="750.72" y2="100%" x1="1101.63" y1="0" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="1177.48" y1="350.52" x2="1037.13" y2="0"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1469.56" y1="1080" x2="1303.89" y2="666.24"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1295.17" y1="644.44" x2="1185.2" y2="369.8"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="1469.56" y1="100%" x2="1037.13" y2="0" class="pinkline" />
            <line x2="1469.56" y2="100%" x1="1037.13" y1="0" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="1057.5" y1="1080" x2="1153.49" y2="671.69"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1231.32" y1="340.63" x2="1311.4" y2="0"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1158.24" y1="651.5" x2="1226.08" y2="362.93"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="1057.5" y1="100%" x2="1311.4" y2="0" class="pinkline" />
            <line x2="1057.5" y2="100%" x1="1311.4" y1="0" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="1852.43" y1="1080" x2="1558.38" y2="665.23"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1392.49" y1="435.75" x2="1083.56" y2="0"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1546.18" y1="648.03" x2="1401.8" y2="444.37"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="1852.43" y1="100%" x2="1083.56" y2="0" class="pinkline" />
            <line x2="1852.43" y2="100%" x1="1083.56" y1="0" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="1392.95" y1="658.68" x2="758.9" y2="1080"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1920" y1="308.47" x2="1548.5" y2="555.33"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1532.6" y1="565.89" x2="1409.87" y2="647.44"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="100%" y1="308.47" x2="758.9" y2="100%" class="pinkline" />
            <line x2="758.9" y2="100%" x1="100%" y1="308.47" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="1040.3" y1="591.62" x2="849.37" y2="657.42"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="638.68" y1="730.02" x2="0" y2="950.11"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="828.95" y1="664.45" x2="655.75" y2="724.14"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1130.38" y1="560.58" x2="1060.75" y2="584.58"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1275.34" y1="510.62" x2="1147.98" y2="554.51"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1368.08" y1="478.67" x2="1294.95" y2="503.87"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1515.18" y1="427.98" x2="1381.12" y2="474.17"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1920" y1="288.47" x2="1534.64" y2="421.27"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x2="100%" y2="288.47" x2="0" y2="950.11" class="pinkline" />

            <line x1="100%" y1="288.47" x2="0" y2="950.11" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="796.35" y1="1080" x2="734.01" y2="786.71"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="727.05" y1="753.96" x2="658.82" y2="432.97"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="655.21" y1="415.97" x2="566.79" y2="0"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="796.35" y1="100%" x2="566.79" y2="0" class="pinkline" />

            <line x1="566.79" y1="0" x2="796.35" y2="100%" pathLength="100" class="jump-line" />
        </g>
        <g>
            <!--        <line x1="1023.05" y1="649.36" x2="933.74" y2="390"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="927.82" y1="372.8" x2="799.45" y2="0"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <!--        <line x1="1171.33" y1="1080" x2="1027.95" y2="663.61"-->
            <!--              style="fill: #fff; stroke: #000; stroke-miterlimit: 10; stroke-width: 20px;"/>-->
            <line x1="799.45" y1="0" x2="1171.33" y2="100%" class="pinkline" />


            <!--Use path length and dasharray to define the ration of the line that is filled.
        The line is filled with this ration dasharray/pathLength and can be moved with offset-->

            <line x1="799.45" y1="0" x2="1171.33" y2="100%" pathLength="100" class="jump-line" />
        </g>
    </svg>

    <!--<script type="module" src="App.fs.js"></script>-->
    <script>
        const svg = document.querySelector("svg");
        const lines = document.querySelectorAll("line.jump-line");


        // The y axis is the only thing that stays at the same place at the top of the page. All other sides are movable.
        // Get rate of change and x for y = 0 so we can describe all lines as lines that start from the x axis where y = 0, then we frame it more (y =ax +b; y =0)
        const lineDescriptors = [
            // Probably should add more things here 
            { startX: -474.2141376578821, a: 0.46630833482730316 },
            { startX: 762.1099853515625, a: -1.3795121255829337 },
            { startX: 160.5500030517578, a: 2.465134495275926 },
            { startX: 2709.4681983842133, a: -0.28674999872843426 },
            { startX: 1101.6300048828125, a: -3.0777119341277475 },
            { startX: 1037.1300048828125, a: 2.4975137383072306 },
            { startX: 1311.4000244140625, a: -4.253642757586845 },
            { startX: 1083.56005859375, a: 1.4046587938906259 },
            { startX: 2384.226292500661, a: -0.664481969685644 },
            { startX: 2757.1053981438445, a: -0.3446041584014893 },
            { startX: 566.7899780273438, a: 4.704652428497856 },
            { startX: 799.4500122070312, a: 2.9041630716240805 }
        ];


        function calculateAngle(line) {
            const adjacent = line.x2.baseVal.value - line.x1.baseVal.value;
            const opposite = line.y2.baseVal.value - line.y1.baseVal.value;
            console.log({ adjacent, opposite });
            const angle = Math.atan2(opposite, adjacent)
            return angle;
        }


        // const rateOfChange = (line.x2.baseVal.value - line.x1.baseVal.value) / (line.y2.baseVal.value - line.y1.baseVal.value)
        // console.log({ rateOfChange })
        const line = lines[0];
        function resizeCallback([entry], observer) {
            // console.log(entry);
            const x1 = line.x1.baseVal.value;
            const y1 = line.y1.baseVal.value;
            const x2 = line.x2.baseVal.value;
            const y2 = line.y2.baseVal.value;

            const dx = x2 - x1;
            const dy = y2 - y1;
            const a = dy / dx;
            // y = ax + b <=> b = -ax + y
            const b = -a * x1 + y1; // or just y1 if x1 is 0

            const xLimit = entry.contentBoxSize[0].inlineSize;
            const yLimit = entry.contentBoxSize[0].blockSize;
            // What will be hit first x limit or y limit
            // y = a * x + b <=> y - b = a * x <=> (y - b) / a = x and y = yLimit
            // When we put yLimit into the formula is the resulting x smaller than xLimit 
            const xWithYLimit = (yLimit - b) / a
            // When we put xLimit into the formula is the resulting y smaller than the yLimit
            const yWithXLimit = a * xLimit + b;
            const isHittingYLimitFirst = xLimit > xWithYLimit;
            const isHittingXLimitFirst = yLimit > yWithXLimit;
            console.log({ xWithYLimit, yWithXLimit }, { isHittingXLimitFirst, isHittingYLimitFirst });


        }

        function identity(x) { return x; }
        function resizeCallback2([entry], observer) {
            const svg = entry.target;
            console.log(svg);

            const xUpper = entry.contentBoxSize[0].inlineSize;
            const yUpper = entry.contentBoxSize[0].blockSize;
            lineDescriptors.map(({ startX, a }) => {
                // Calculate end
                const x1 = startX;
                const y1 = 0;



                // y = ax + b <=> y - ax = b
                const b = y1 - (a * x1);
                const f = (x) => a * x + b;

                // If hits xLower first
                const f0 = f(0);
                if (0 < f0 && f0 < yUpper) {
                    // Then set x2 = 0 and y2 = f(0)
                    return { x1, y1, x2: 0, y2: f0 };
                }

                // Hits yUpper first
                // Might run out of bits to represent the number if it's a really steep line 🤔
                if (f0 > yUpper || f(xUpper) > yUpper) {
                    // Get x for yLimit
                    // y = ax + b <=> (y - b) / a = x
                    const x2 = (yUpper - b) / a;
                    return { x1, y1, x2, y2: yUpper };
                }

                // Hits xUpper first
                const fXUpper = f(xUpper);
                if (0 < fXUpper && fXUpper < yUpper) {
                    return { x1, y1, x2: xUpper, y2: fXUpper };
                }

                // Starts in x < 0 and hits xLower first
                if (startX < 0 && 0 < f0 && f0 < yUpper) {
                    // Get x for yLimit
                    const x2 = (yUpper - b) / a;
                    // We only need to render from x1 = 0 as that is visible
                    return { x1: 0, y1: f0, x2, y2: yUpper };
                }

                // Starts in x > xUpper and hits xUpper first
                if (xUpper < startX && 0 < fXUpper && fXUpper < yUpper) {
                    // Get x for yLimit
                    const x2 = (yUpper - b) / a;
                    return { x1: xUpper, y1: fXUpper, x2, y2: yUpper };
                }

                // Edge cases we hit exactly the yUpper corners
                if (f0 === yUpper) {
                    return { x1, y1, x2: 0, y2: yUpper };
                }
                if (fXUpper === yUpper) {
                    return { x1, y1, x2: xUpper, y2: yUpper };
                }

                // (all other cases don't need to be rendered as they are not visible and don't cross our view rectangle)
                return null;
            }).filter(identity)
                .forEach(({ x1, y1, x2, y2 }) => {
                    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
                    line.setAttribute("x1", x1);
                    line.setAttribute("y1", y1);
                    line.setAttribute("x2", x2);
                    line.setAttribute("y2", y2);

                    line.setAttribute("pathLength", 100);
                    line.classList.add("jump-line");
                });
        }
        const observer = new ResizeObserver(resizeCallback2);

        observer.observe(svg);

    </script>
</body>

</html>